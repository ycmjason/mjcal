var Ge=Object.defineProperty,Je=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var ie=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&ie(e,r,t[r]);if(L)for(var r of L(t))ce.call(t,r)&&ie(e,r,t[r]);return e},k=(e,t)=>Je(e,Ue(t));var ue=(e,t)=>{var r={};for(var o in e)le.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&L)for(var o of L(e))t.indexOf(o)<0&&ce.call(e,o)&&(r[o]=e[o]);return r};import{r as i,j as n,u as me,z as B,a as qe,b as xe,n as ge,c as u,F as W,d as T,T as A,e as S,S as C,f as Ye,g as fe,C as Ce,h as ye,I as N,i as x,k as R,D as Ke,l as Xe,m as Qe,o as Ze,B as y,p as Se,q as U,s as be,t as ve,v as j,w,x as I,P as O,y as we,A as Pe,E as Ie,G as M,H as f,J as et,K as tt,L as P,M as nt,N as q,O as Fe,Q as rt,R as ot,U as st,V as at,W as it,X as lt,Y as ct,Z as ut,_ as dt,$ as ht,a0 as pt,a1 as mt,a2 as xt}from"./vendor.f6836463.js";function wn(){import("data:text/javascript,")}const gt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}};gt();const ke=e=>({path:e}),ft=e=>window.history.pushState({},document.title,e),Ct=e=>window.history.replaceState({},document.title,e),yt=()=>{const[e,t]=i.exports.useState(location.pathname);me("popstate",()=>t(location.pathname));const r=i.exports.useCallback(({path:s})=>{t(s),ft(s)},[]),o=i.exports.useCallback(({path:s})=>{t(s),Ct(s)},[]);return[i.exports.useMemo(()=>ke(e),[e]),r,r,o,o]},St=(e,t)=>[i.exports.useMemo(()=>ke(t.currentLocation.path.slice(e.length)),[t.currentLocation.path,e]),i.exports.useCallback(({path:r})=>t.navigate({path:`${e}${r}`}),[e]),t.navigateAbsolute,i.exports.useCallback(({path:r})=>t.replace({path:`${e}${r}`}),[e]),t.replaceAbsolute],G=i.exports.createContext(null),Te=({rootPath:e="",children:t}={})=>{const r=i.exports.useContext(G),[o,s,a,l,c]=r?St(e,r):yt();return n(G.Provider,{value:{rootPath:e,currentLocation:o,navigate:s,navigateAbsolute:a,replace:l,replaceAbsolute:c},children:t})},bt=(e,t)=>Object.fromEntries(B(e.split("/"),t.split("/")).filter(([r])=>r.startsWith(":")).map(([r,o])=>[r.slice(1),o])),vt=(e,t)=>{const r=e.split("/"),o=t.split("/");return r.length>o.length?!1:B(r,o).every(qe(wt))},wt=(e,t)=>e==="*"||e.startsWith(":")?!0:e===t,D=()=>{const e=i.exports.useContext(G);if(!e)throw new Error("no router context found");return e},v=e=>e,Y=({views:e})=>{const{currentLocation:t,replace:r}=D(),o=t.path,s=e.find(({path:a})=>vt(a,o));return s?"redirect"in s?(xe(()=>r({path:s.redirect})),null):n(Te,{rootPath:s.path==="/"?"":s.path,children:n(s.component,g({},bt(s.path,o)))}):null},Pt="modulepreload",de={},It="/",Ae=function(t,r){return!r||r.length===0?t():Promise.all(r.map(o=>{if(o=`${It}${o}`,o in de)return;de[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":Pt,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((c,d)=>{l.addEventListener("load",c),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},Ft=e=>e;var Ee=Ft({appName:"\u9EBB\u96C0\u8A08\u5206\u5668",locales:{chinglish:"Chinglish",zhHk:"\u5EE3\u6771\u8A71"},bottomMenu:{chart:"\u5716",table:"\u8868",settings:"\u8A2D\u5B9A"},round:"\u5C40",score:"\u5206\u6578",addRound:"\u98DF\u7CCA",next:"\u7E7C\u7E8C",back:"\u8FD4\u56DE",cancel:"\u53D6\u6D88",done:"\u641E\u6382",winner:"\u98DF\u5BB6",losers:"\u51FA\u9283\u8005",farn:"\u756A",player:"\u73A9\u5BB6",selfTouch:"\u81EA\u6478",isSelfTouch:"\u81EA\u6478\uFF1F",isBao:"\u5305\uFF1F",addPlayer:"\u65B0\u589E\u73A9\u5BB6",chungJai:"\u9283\u5236",chungJais:{half:"\u534A\u9283",full:"\u5168\u9283"},chipValue:"\u7C4C\u78BC\u8A08\u6CD5",chipValues:{c25chicken:"\u4E8C\u4E94\u96DE",c51:"\u4E94\u4E00",c12mosquitoes:"\u4E00\u4E8C\u868A"},halfSpicyFrom:"\u5E7E\u756A\u958B\u59CB\u534A\u8FA3\uFF1F",halfSpicyFroms:{never:"\u5F9E\u4E0D",customPlaceholder:"\u81EA\u8A02"},noData:"\u672A\u6709\u6578\u64DA...",chartPlaceholderText:"\u98DF\u4E0B\u7CCA\u5148\u6709\u5716\u7747...",openTable:"\u958B\u6AAF",landingPage:{heading:"\u9EBB\u96C0\u8A08\u5206\u5668",subheading:"\u5514\u6D17\u7528\u8166\u65E2\u5668"},openTablePage:{scoringSettings:{heading:"\u9EDE\u6253\u6CD5\uFF1F"},players:{heading:"\u73A9\u5BB6"},firstWuStep:{heading:"\u641E\u6382\u54C2\uFF01",subheading:"\u3A52\u4E0B\u9762\u500B\u63A3\u98DF\u7CCA\uFF01"}},beforeUnloadMessage:"\u771F\u4FC2\u8981\u8D70\uFF1F\u8D70\u5497\u5C31\u5187\u54C2\u5572\u8A18\u9304\u5AC1\u5566\uFF01",addRoundModal:{currentPlayersSelectTitle:"\u908A\u500B\u73A9\u7DCA\uFF1F"}});const kt={chinglish:()=>Ae(()=>import("./chinglish.32402672.js"),["assets/chinglish.32402672.js","assets/vendor.f6836463.js"]),"zh-hk":()=>({default:Ee})},Me=i.exports.createContext(null),Tt=({children:e})=>{const[t,r]=i.exports.useState("zh-hk"),[o,s]=i.exports.useState(Ee);return i.exports.useEffect(()=>{(async()=>s((await kt[t]()).default))()},[t]),n(Me.Provider,{value:{t:o,locale:t,setLocale:r},children:e})},Be=()=>{const e=i.exports.useContext(Me);if(!e)throw new Error("no locale context found");return e},h=()=>{const{t:e}=Be();return e},Re=e=>g({id:ge()},e),_=i.exports.createContext({players:[],setPlayers:()=>{}}),At=({children:e})=>{const t=h(),[r,o]=i.exports.useState(Array.from({length:4},(s,a)=>Re({name:`${t.player} ${a+1}`})));return n(_.Provider,{value:{players:r,setPlayers:o},children:e})},De=e=>g({id:ge()},e),Et=r=>{var o=r,{playerIds:e}=o,t=ue(o,["playerIds"]);if(e.length!==4)throw new Error("playerIds.length is not 4");return De(g({isTied:!1,playerIds:e},t))},Mt=({allPlayers:e,selectedPlayerIds:t,onSelectedPlayerIdsChange:r})=>{const o=i.exports.useMemo(()=>new Set(t),[t]),s=h();return u(W,{fullWidth:!0,sx:{mt:1},children:[n(T,{focused:!1,children:s.addRoundModal.currentPlayersSelectTitle}),n(A,{color:"primary",value:t,onChange:(a,l)=>r(l),fullWidth:!0,orientation:"vertical",children:e.map(({id:a,name:l})=>n(S,{disabled:!o.has(a)&&t.length>=4,value:a,children:l},a))})]})},Bt=()=>{const{players:e,selectedPlayerIds:t,setSelectedPlayerIds:r,setCanNext:o}=i.exports.useContext($);return i.exports.useEffect(()=>o(t.length===4),[t]),n(Mt,{allPlayers:e,selectedPlayerIds:t,onSelectedPlayerIdsChange:r})},Rt=({players:e,loserIds:t,onLoserIdsChange:r,disabled:o})=>{const s=h();return u(C,{children:[n(T,{children:s.losers}),n(A,{color:"primary",value:t,onChange:(a,l)=>r([l]),exclusive:!0,fullWidth:!0,orientation:"vertical",disabled:o,children:e.map(({id:a,name:l})=>n(S,{value:a,children:l},a))})]})},Dt=()=>{const e=h(),{selectedPlayers:t,winnerId:r,loserIds:o,setLoserIds:s,isSelfTouch:a,isBao:l,setIsBao:c,setCanNext:d}=i.exports.useContext($),p=i.exports.useMemo(()=>t.filter(({id:m})=>m!==r),[t,r]);return i.exports.useEffect(()=>c(a&&l),[a,l]),i.exports.useEffect(()=>s(a&&!l?p.map(({id:m})=>m):[]),[a,l]),i.exports.useEffect(()=>d(o.length>0),[o]),u(C,{gap:2,children:[n(Rt,{loserIds:o,disabled:a&&!l,onLoserIdsChange:s,players:p}),a&&n(Ye,{sx:{ml:"auto"},children:n(fe,{control:n(Ce,{checked:l,onChange:(m,F)=>c(F)}),label:`${e.isBao} \u{1F35E}`})})]})},_t=({farn:e,onFarnChange:t})=>{const r=h();return n(C,{direction:"row",children:n(ye,{InputProps:{startAdornment:n(N,{onClick:()=>t(e-1),children:n(x,{children:"remove"})}),endAdornment:n(N,{onClick:()=>t(e+1),children:n(x,{children:"add"})})},sx:{width:o=>o.spacing(18)},inputProps:{inputMode:"numeric",pattern:"[0-9]*",style:{textAlign:"center"}},value:e,label:r.farn,onChange:o=>{const s=Number(o.target.value);Number.isNaN(s)||t(s)}})})},Lt=({players:e,winnerId:t,onWinnerIdChange:r})=>{const o=h();return u(C,{children:[n(T,{children:o.winner}),n(A,{orientation:"vertical",color:"primary",value:t,exclusive:!0,onChange:(s,a)=>{!e.map(({id:l})=>l).includes(a)||r(a)},fullWidth:!0,children:e.map(({id:s,name:a})=>n(S,{value:s,children:a},s))})]})},Wt=()=>{const e=h(),{selectedPlayers:t,winnerId:r,setWinnerId:o,farn:s,setFarn:a,isSelfTouch:l,setIsSelfTouch:c,setCanNext:d}=i.exports.useContext($);return i.exports.useEffect(()=>d(!!r),[r]),u(C,{gap:2,children:[n(Lt,{players:t,winnerId:r,onWinnerIdChange:o}),u(C,{direction:"row-reverse",justifyContent:"flex-start",flexWrap:"wrap",gap:2,children:[n(_t,{farn:s,onFarnChange:a}),n(fe,{control:n(Ce,{checked:l,onChange:(p,m)=>c(m)}),label:`${e.isSelfTouch} \u{1F90F}`})]})]})},Nt=3,$=i.exports.createContext({players:[],selectedPlayers:[],selectedPlayerIds:[],setSelectedPlayerIds:e=>{},farn:3,setFarn:e=>{},winnerId:void 0,setWinnerId:e=>{},loserIds:[],setLoserIds:e=>{},isBao:!1,setIsBao:e=>{},isSelfTouch:!1,setIsSelfTouch:e=>{},setCanNext:e=>{}}),Ot=({players:e,onAddRound:t,TriggerComponent:r})=>{var se,ae;const o=h(),s=i.exports.useMemo(()=>new Map(e.map(b=>[b.id,b])),[e]),[a,l]=i.exports.useState(!1),[c,d]=i.exports.useState(0),[p,m]=i.exports.useState(!1),[F,Ve]=i.exports.useState(e.slice(0,4).map(({id:b})=>b)),[K,X]=i.exports.useState(3),[V,Q]=i.exports.useState(),[Z,ee]=i.exports.useState([]),[te,ne]=i.exports.useState(!1),[re,oe]=i.exports.useState(!1);i.exports.useEffect(()=>{!a||(d(0),X(3),Q(void 0),ee([]),ne(!1),oe(!1),m(!1))},[a]);const He=i.exports.useMemo(()=>F.map(b=>s.get(b)),[F,s]);return u(R,{children:[n(r,{onOpenModal:()=>l(!0)}),u(Ke,{open:a,onClose:()=>l(!1),fullWidth:!0,children:[n(Xe,{children:o.addRound}),n(Qe,{children:n($.Provider,{value:{players:e,selectedPlayers:He,selectedPlayerIds:F,setSelectedPlayerIds:Ve,farn:K,setFarn:X,winnerId:V,setWinnerId:Q,loserIds:Z,setLoserIds:ee,isBao:te,setIsBao:ne,isSelfTouch:re,setIsSelfTouch:oe,setCanNext:m},children:(ae=(se=[()=>n(Bt,{}),()=>n(Wt,{}),()=>n(Dt,{})])[c])==null?void 0:ae.call(se)})}),u(Ze,{children:[n(y,{onClick:()=>l(!1),sx:{mr:"auto"},color:"secondary",children:o.cancel}),n(y,{disabled:c<=0,onClick:()=>d(c-1),children:o.back}),(({onClick:b,text:je})=>n(y,{onClick:b,disabled:!p,children:je}))(c<Nt-1?{text:o.next,onClick:()=>d(c+1)}:{text:o.done,onClick:()=>{if(l(!1),!V)throw new Error("no winnerId found");t(Et({playerIds:F,winnerId:V,loserIds:Z,farn:K,isBao:te,isSelfTouch:re}))}})]})]})]})},$t=()=>{const e=Se(({breakpoints:t})=>t.down("xl")).valueOf();return{isMobile:e,isDesktop:!e}},zt=({onOpenModal:e})=>{const t=U(),r=h(),o=$t().isMobile;return n(be,k(g({color:"primary"},o?{variant:"circular",sx:{position:"fixed",bottom:t.spacing(10),right:t.spacing(3),zIndex:10}}:{variant:"extended",sx:{gap:1,"&::after":{content:`"${r.addRound}"`}}}),{onClick:e,children:n(ve,{icon:n(x,{children:"ramen_dining"})})}))},E=i.exports.createContext({rounds:[],addRound:()=>{},removeRound:()=>{}}),Vt=({children:e})=>{const[t,r]=i.exports.useState([]);return n(E.Provider,{value:{rounds:t,addRound:o=>r(j(t,s=>{s.push(De(o))})),removeRound:o=>r(t.filter(s=>s.id!==o))},children:e})},_e=({TriggerComponent:e=zt})=>{const{players:t}=i.exports.useContext(_),{addRound:r}=i.exports.useContext(E);return n(Ot,{players:t,onAddRound:r,TriggerComponent:e},0)},Ht=({onOpenModal:e})=>{const t=U(),r=h(),o=Se(t.breakpoints.down("md")).valueOf()?1.8:3;return n(be,{color:"primary",variant:"extended",sx:{gap:1,transform:`scale(${o})`,boxShadow:`0px 0px 50px 10px ${t.palette.grey[600]}`,"&::after":{content:`"${r.addRound}"`}},onClick:e,size:"large",children:n(ve,{icon:n(x,{children:"ramen_dining"})})})},jt=({onNext:e,onBack:t})=>{const r=h(),{rounds:o}=i.exports.useContext(E);return i.exports.useEffect(()=>{o.length>0&&e()},[o]),u(C,{sx:{gap:3,alignItems:"center"},children:[n(w,{alignSelf:"flex-start",children:n(y,{onClick:t,children:r.back})}),u(I,{variant:"h3",component:"h1",sx:{display:"flex",gap:3,alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[n(x,{fontSize:"inherit",children:"done"}),r.openTablePage.firstWuStep.heading]}),n(I,{variant:"h4",component:"h2",children:r.openTablePage.firstWuStep.subheading}),n(w,{sx:{display:"flex",height:"500px",maxHeight:"80vw",alignItems:"center",justifyContent:"center",width:"100%"},children:n(_e,{TriggerComponent:Ht})})]})},Gt=({players:e,onSetPlayers:t,sx:r})=>{const o=h();return u(O,{sx:g({flexGrow:1,display:"flex",gap:1,flexDirection:"column",padding:2},r),children:[n(w,{sx:{marginBottom:1},children:n(y,{variant:"outlined",startIcon:n(x,{children:"person_add"}),onClick:()=>t(j(e,s=>{s.push(Re({name:`${o.player} ${e.length+1}`}))})),children:o.addPlayer})}),n(we,{children:n(Pe,{sx:{minWidth:320},children:n(Ie,{children:e.map((s,a)=>u(M,{children:[n(f,{padding:"checkbox",children:n(N,{onClick:()=>t(e.filter(({id:l})=>l!==s.id)),disabled:e.length<=4,children:n(x,{children:"delete"})})}),n(f,{children:n(ye,{label:`${o.player} ${a+1}`,variant:"outlined",InputProps:{startAdornment:n(et,{position:"start",children:n(x,{sx:{marginRight:1},children:"person"})})},value:s.name,onChange:l=>t(j(e,c=>{const d=c.find(({id:p})=>p===s.id);!d||(d.name=l.target.value)})),fullWidth:!0})})]},s.id))})})})]})},Le=()=>{const{players:e,setPlayers:t}=i.exports.useContext(_);return n(Gt,{players:e,onSetPlayers:r=>t(r)})},Jt=({onBack:e,onNext:t})=>{const r=h();return u(C,{gap:3,children:[n(I,{variant:"h3",component:"h1",children:r.openTablePage.players.heading}),n(Le,{}),u(C,{sx:{alignSelf:"flex-end",flexDirection:"row",gap:2},children:[n(y,{variant:"text",size:"large",onClick:e,children:r.back}),n(y,{variant:"contained",size:"large",onClick:t,children:r.next})]})]})},Ut=({settings:e,onSetSettings:t,sx:r})=>{const o=h();return u(O,{sx:g({flexGrow:1,display:"flex",gap:2,flexDirection:"column",padding:2},r),children:[u(W,{children:[n(T,{sx:{mb:1},children:o.chungJai}),u(A,{value:e.chungJai,exclusive:!0,onChange:(s,a)=>a&&t(k(g({},e),{chungJai:a})),fullWidth:!0,children:[n(S,{value:"half",children:o.chungJais.half}),n(S,{value:"full",children:o.chungJais.full})]})]}),u(W,{children:[n(T,{sx:{mb:1},children:o.chipValue}),u(A,{value:e.chipValue,exclusive:!0,onChange:(s,a)=>a&&t(k(g({},e),{chipValue:a})),fullWidth:!0,children:[n(S,{value:"25chicken",children:o.chipValues.c25chicken}),n(S,{value:"51",children:o.chipValues.c51}),n(S,{value:"12mosquitoes",children:o.chipValues.c12mosquitoes})]})]}),u(W,{children:[n(T,{sx:{mb:1},children:o.halfSpicyFrom}),u(A,{value:e.halfSpicyFrom,exclusive:!0,onChange:(s,a)=>a&&t(k(g({},e),{halfSpicyFrom:a})),fullWidth:!0,sx:{mb:1},children:[n(S,{value:"never",children:o.halfSpicyFroms.never}),n(S,{value:4,children:"4"})]}),n(tt,{inputProps:{inputMode:"numeric",pattern:"[0-9]{2}"},value:["never",4].includes(e.halfSpicyFrom)?"":e.halfSpicyFrom,onChange:s=>t(k(g({},e),{halfSpicyFrom:Number.parseInt(s.target.value)||4})),placeholder:o.halfSpicyFroms.customPlaceholder,sx:{alignSelf:"flex-start",pt:1,pl:1,pr:1}})]})]})},We={chungJai:"full",chipValue:"25chicken",halfSpicyFrom:4},z=i.exports.createContext({settings:We,setSettings:()=>{}}),qt=({children:e})=>{const[t,r]=i.exports.useState(We);return n(z.Provider,{value:{settings:t,setSettings:r},children:e})},Ne=()=>{const{settings:e,setSettings:t}=i.exports.useContext(z);return n(Ut,{settings:e,onSetSettings:t})},Yt=({onNext:e})=>{const t=h();return u(C,{sx:{gap:3},children:[n(I,{variant:"h3",component:"h1",children:t.openTablePage.scoringSettings.heading}),n(Ne,{}),n(C,{sx:{alignSelf:"flex-end",flexDirection:"row",gap:2},children:n(y,{variant:"contained",size:"large",onClick:e,children:t.next})})]})},Kt=()=>{const{navigate:e,navigateAbsolute:t}=D();return n(P,{maxWidth:"xl",sx:{pt:5},children:n(Y,{views:[v({path:"/scoring-settings",component:()=>n(Yt,{onNext:()=>e({path:"/players"})})}),v({path:"/players",component:()=>n(Jt,{onBack:()=>e({path:"/scoring-settings"}),onNext:()=>e({path:"/first-wu"})})}),v({path:"/first-wu",component:()=>n(jt,{onBack:()=>e({path:"/players"}),onNext:()=>t({path:"/game/chart"})})}),v({path:"*",redirect:"/scoring-settings"})]})})},Xt=({farn:e,halfSpicyFrom:t})=>Number((2**Math.min(e,t)*1.5**Math.max(0,Math.ceil((e-t)/2))*(4/3)**Math.max(0,Math.floor((e-t)/2))).toFixed(2)),Qt=({farn:e,halfSpicyFrom:t,baseScore:r,isSelfTouch:o})=>Xt({farn:e,halfSpicyFrom:t})*r*(o?6:4),Zt=({score:e,chungJai:t,isLoser:r,loserCount:o,isSelfTouch:s})=>{if(s)return r?-1*e/o:0;switch(t){case"full":return r?-1*e:0;case"half":return-1*e/(r?2:4)}},Oe=(e,{players:t,scoringSettings:r})=>{if(e.isTied)return t.map(()=>0);const o=Qt({farn:e.farn,baseScore:{"25chicken":.25,"51":.5,"12mosquitoes":1}[r.chipValue],halfSpicyFrom:r.halfSpicyFrom==="never"?Number.POSITIVE_INFINITY:r.halfSpicyFrom,isSelfTouch:e.isSelfTouch}),s=new Set(e.playerIds);return t.map(({id:a})=>s.has(a)?e.winnerId===a?o:Zt({score:o,chungJai:r.chungJai,isLoser:e.loserIds.includes(a),loserCount:e.loserIds.length,isSelfTouch:e.isSelfTouch}):null)},en=({data:e})=>{var o,s,a,l;const t=U(),r=h();return n(nt,{data:i.exports.useMemo(()=>e.map(({playerName:c,scores:d})=>({id:c,data:d.map((p,m)=>({x:m,y:p}))})).reverse(),[e]),pointLabelYOffset:-12,enableSlices:"x",theme:{background:t.palette.background.default,textColor:t.palette.text.secondary,fontSize:11,grid:{line:{stroke:t.palette.secondary.dark,strokeWidth:1}},tooltip:{container:{background:t.palette.secondary.light,color:t.palette.secondary.contrastText,fontSize:12}}},margin:{top:20,right:20,bottom:85,left:60},yScale:(()=>{const c=i.exports.useMemo(()=>Math.max(...e.flatMap(({scores:d})=>d).map(d=>Math.abs(d!=null?d:0))),[e]);return{type:"linear",min:-c,max:c}})(),colors:{scheme:"set3"},gridXValues:(s=(o=e[0])==null?void 0:o.scores.length)!=null?s:0,axisBottom:{legend:r.round,legendOffset:36,legendPosition:"middle",tickValues:(l=(a=e[0])==null?void 0:a.scores.length)!=null?l:0},axisLeft:{legend:r.score,legendOffset:-40,legendPosition:"middle"},useMesh:!0,legends:[{anchor:"bottom-left",direction:"row",justify:!1,translateX:-20,translateY:70,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)"}]})},tn=25,$e=({data:e})=>{var t,r;return n(w,{sx:{width:"100%",overflowX:"auto",overflowY:"hidden"},children:n(w,{sx:{minWidth:`${tn*((r=(t=e[0])==null?void 0:t.scores.length)!=null?r:1)}px`,minHeight:"600px",height:"calc(80vh - 200px)",display:"flex",alignItem:"center"},children:n(en,{data:e})})})},nn=()=>{const e=h(),{players:t}=i.exports.useContext(_),{settings:r}=i.exports.useContext(z),{rounds:o}=i.exports.useContext(E),s=q(o.map(a=>Oe(a,{players:t,scoringSettings:r})));return n(P,{maxWidth:"xl",sx:{pt:5,pb:8},children:o.length<=0?n(w,{sx:{width:"100%",height:"70vh",backgroundColor:a=>a.palette.grey[900],color:a=>a.palette.getContrastText(a.palette.grey[900]),display:"flex",justifyContent:"center",alignItems:"center"},children:e.chartPlaceholderText}):n($e,{data:s.map(a=>Fe((l,c)=>l+(c!=null?c:0),0,a)).map((a,l)=>{var c,d;return{playerName:(d=(c=t[l])==null?void 0:c.name)!=null?d:"## NO PLAYER FOUND ##",scores:a}})})})},rn=(e,{active:t=!0}={})=>me("beforeunload",r=>{if(!!t)return r.preventDefault(),r.returnValue=e,e}),on=()=>u(P,{maxWidth:"xl",sx:{display:"flex",flexDirection:"column",gap:3},children:[n(Le,{}),n(Ne,{})]}),sn=()=>{const e=h(),{players:t}=i.exports.useContext(_),{rounds:r,removeRound:o}=i.exports.useContext(E),{settings:s}=i.exports.useContext(z),[a,l]=i.exports.useMemo(()=>{const c=r.map(d=>Oe(d,{players:t,scoringSettings:s}));return[new Map(B(r.map(({id:d})=>d),c)),new Map(B(t.map(({id:d})=>d),q(c).map(d=>rt(d.map(p=>p!=null?p:0)))))]},[r,t,s]);return n(P,{maxWidth:"xl",sx:{pb:8},children:n(O,{sx:{width:"100%",overflow:"hidden"},children:n(we,{sx:{maxHeight:"65vh"},children:u(Pe,{stickyHeader:!0,"aria-label":"sticky table",children:[n(ot,{children:u(M,{sx:{whiteSpace:"nowrap"},children:[n(f,{padding:"checkbox"}),n(f,{padding:"none",children:"#"}),t.map(c=>n(f,{children:c.name},c.id))]})}),n(Ie,{children:r.length<=0?n(M,{children:n(f,{colSpan:2+t.length,align:"center",children:e.noData})}):u(R,{children:[r.map(({id:c},d)=>u(M,{children:[n(f,{size:"small",children:n(N,{onClick:()=>o(c),children:n(x,{fontSize:"inherit",children:"delete"})})}),u(f,{padding:"none",children:["#",d+1]}),a.get(c).map((p,m)=>n(f,{sx:{color:he(p)},children:p!=null?p:"-"},m))]},`round${d}`)),u(M,{sx:({palette:c})=>({bgcolor:"#122b36",color:c.info.contrastText}),ref:c=>c==null?void 0:c.scrollIntoView(),children:[n(f,{}),n(f,{padding:"none",children:"Sum"}),t.map(({id:c})=>l.get(c)).map((c,d)=>n(f,{sx:{color:he(c)},children:c},d))]})]})})]})})})})},he=e=>{if(!(e===0||e===null))return({palette:t})=>t[e>0?"success":"error"].main},an=({items:e,selectedItemId:t,onSelectedItemIdChange:r})=>n(st,{showLabels:!0,value:e.findIndex(({id:o})=>o===t),onChange:(o,s)=>{const a=e[s];if(!a)throw new Error(`cannot find item at index ${s}`);r(a.id)},sx:{width:"100%"},children:e.map(({label:o,icon:s},a)=>n(at,{label:o,icon:s},a))}),ln=e=>{const{currentLocation:t,navigate:r}=D();return[i.exports.useCallback(()=>n(Y,{views:e}),[e]),i.exports.useCallback(()=>n(an,{items:i.exports.useMemo(()=>e.map(({path:o,label:s,icon:a})=>({id:o,label:s,icon:a})),[e]),selectedItemId:t.path,onSelectedItemIdChange:o=>r({path:o})}),[e,t,r])]},cn=()=>{const e=h(),{rounds:t}=i.exports.useContext(E);rn(e.beforeUnloadMessage,{active:i.exports.useMemo(()=>t.length>0,[t.length])});const{currentLocation:r}=D(),[o,s]=ln(i.exports.useMemo(()=>[{path:"/chart",label:e.bottomMenu.chart,icon:n(x,{children:"stacked_line_chart"}),component:nn},{path:"/table",label:e.bottomMenu.table,icon:n(x,{children:"list_alt"}),component:sn},{path:"/settings",label:e.bottomMenu.settings,icon:n(x,{children:"settings"}),component:on}],[e]));return u(w,{sx:{pb:12},children:[n(P,{maxWidth:"xl",sx:{mb:2,display:r.path==="/settings"?"none":void 0},children:n(_e,{})}),n(o,{}),n(P,{maxWidth:"xl",sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1},children:n(s,{})})]})},un=()=>n(O,{elevation:1,sx:{padding:3,pb:7,mt:10,textAlign:"center"},children:"Made with \u2665 by ycmjason"}),dn=(e,t)=>{const{wait:r=0,immediate:o=!1}=(()=>typeof t=="undefined"?{wait:0}:typeof t=="number"?{wait:t}:t)();o&&e();const s=window.setInterval(e,r);return()=>window.clearInterval(s)},pe=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,H=e=>J(e,1)[0],J=(e,t)=>hn(e).slice(0,t),hn=([...e])=>{for(let t=0;t<e.length;t++){const r=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[r],e[r]=o}return e},pn=(e,t)=>{const[r,o]=i.exports.useState(t);return xe(()=>{(async()=>o(await e()))()}),r},ze=()=>D().navigate,mn=e=>{const t=J(e,pe(4,6)),r=Array.from({length:pe(40,120)},()=>{const o=J(t,4),s=H(o),a=H(o.filter(c=>s!==c)),l=H([4,8,16,24,32,48,64]);return t.map(c=>s===c?l:a===c?-l/2:o.includes(c)?-l/4:0)});return B(t,q(r)).map(([o,s])=>({playerName:o,scores:Fe(it,0,s)}))},xn=()=>{const e=pn(()=>Ae(()=>import("./names.4818f342.js"),[]).then(o=>o.default),[]),[t,r]=i.exports.useState([]);return i.exports.useEffect(()=>dn(()=>r(mn(e)),{wait:5e3,immediate:!0}),[e]),t},gn=()=>{const e=h(),t=ze();return u(R,{children:[n(P,{maxWidth:"xl",sx:{pt:5},children:u(C,{alignItems:"center",children:[n(I,{variant:"h3",component:"h1",children:e.landingPage.heading}),n(I,{variant:"h5",component:"h2",textAlign:"center",sx:{mb:3},children:e.landingPage.subheading}),n($e,{data:xn()}),u(y,{variant:"contained",size:"large",sx:{mt:5},onClick:()=>t({path:"/open-table"}),children:[e.openTable,n(x,{sx:{ml:1},children:"table_bar"})]})]})}),n(un,{})]})},fn=()=>{const{t:e,setLocale:t,locale:r}=Be();return{chinglish:()=>n(y,{color:"inherit",onClick:()=>t("zh-hk"),children:e.locales.zhHk}),"zh-hk":()=>n(y,{color:"inherit",onClick:()=>t("chinglish"),children:e.locales.chinglish})}[r]()},Cn=()=>{const e=h(),t=ze();return n(w,{sx:{flexGrow:1,marginBottom:10,zIndex:999},children:n(lt,{position:"fixed",children:n(ct,{children:u(P,{maxWidth:"xl",sx:{display:"flex"},children:[n(I,{variant:"h6",component:"h1",sx:{cursor:"pointer",mr:"auto"},onClick:()=>t({path:"/"}),children:e.appName}),n(fn,{})]})})})})};const yn=()=>u(R,{children:[n(Cn,{}),n(Y,{views:[v({path:"/open-table",component:Kt}),v({path:"/game",component:cn}),v({path:"/",component:gn}),v({path:"/*",redirect:"/"})]})]}),Sn=({children:e,components:t})=>t.reduceRight((r,o)=>n(o,{children:r}),n(R,{children:e})),bn=({children:e})=>n(Tt,{children:n(Te,{children:u(ut,{theme:dt({palette:{mode:"dark",secondary:{main:"#b7b7b7",contrastText:"#000"}}}),children:[n(ht,{}),n(Sn,{components:[At,Vt,qt],children:e})]})})});pt();mt.render(n(xt.StrictMode,{children:n(bn,{children:n(yn,{})})}),document.getElementById("root"));export{wn as __vite_legacy_guard,Ft as c};
